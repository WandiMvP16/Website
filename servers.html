<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kisah Tanah Air RP</title>
    <link rel="icon" type="image/x-icon" href="https://r2.fivemanage.com/MYfZf6samhDbhH0VObPlC/image/logokita.webp">
    <meta name="description" content="Discover Our Premium Minecraft Servers"/>
    <link rel="stylesheet" href="style.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Akrobat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header class="main-header">
        <div class="nav-container">
            <div class="nav-left">
                <a href="/" class="logo">
                    <img src="https://r2.fivemanage.com/MYfZf6samhDbhH0VObPlC/image/logokita.webp" alt="KITA RP">
                </a>
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Open Menu">
                    <i class="fas fa-bars"></i>
                </button>
                <ul class="nav-links" id="navLinks">
                    <li><a href="index.html" class="nav-link">BERANDA</a></li>
                    <li><a href="servers.html" class="nav-link active">SERVERS</a></li>
                    <li><a href="community.html" class="nav-link">COMMUNITY</a></li>
                    <li><a href="wiki.html" class="nav-link">WIKI</a></li>
                </ul>
            </div>
            <div class="nav-right">
                <div class="server-status-mini">
                    <div class="footer-social">
                        <a href="#" class="discord"><i class="fab fa-discord"></i></a>
                        <a href="#" class="twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="youtube"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="tiktok"><i class="fab fa-tiktok"></i></a>
                    </div>
                    <!-- <div class="status-indicator"></div>
                    <span class="player-count">128/128</span> -->
                    <div class="dropdown-menu">
                        <div class="server-actions">
                            <button class="server-action-btn">
                                <i class="fas fa-signal"></i>
                                <span>TPS: 20.0</span>
                            </button>
                            <button class="server-action-btn">
                                <i class="fas fa-bolt"></i>
                                <span>Ping: 0.1ms</span>
                            </button>
                            <button class="server-action-btn">
                                <i class="fas fa-clock"></i>
                                <span id="uptimeDisplay">Uptime: Loading...</span>
                            </button>
                            <script>
    async function updateUptime() {
        try {
            // Mengambil data dari API FiveM
            const response = await fetch('https://servers-frontend.fivem.net/api/servers/single/rj9l5g');
            const data = await response.json();

            // Mengambil waktu uptime dari data API
            const uptimeSeconds = data.Data.upvotePower || 0; // Misalnya jika upvotePower dianggap sebagai uptime
            const uptimeHours = Math.floor(uptimeSeconds / 3600);
            const uptimeMinutes = Math.floor((uptimeSeconds % 3600) / 60);
            const uptimeString = `${uptimeHours}h ${uptimeMinutes}m`;

            // Menampilkan uptime pada elemen dengan ID uptimeDisplay
            document.getElementById('uptimeDisplay').textContent = `Uptime: ${uptimeString}`;
        } catch (error) {
            console.error('Error fetching uptime:', error);
            document.getElementById('uptimeDisplay').textContent = 'Uptime: Error';
        }
    }

    // Panggil fungsi saat halaman dimuat
    updateUptime();

    // Update uptime setiap 5 detik
    setInterval(updateUptime, 5000);
</script>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="nav-overlay" id="navOverlay"></div>
    </header>

    <div class="servers-page">
        <div class="page-header">
            <div class="header-content">
                <h1>KISAH TANAH AIR ROLEPLAY</h1>
                <p>All Systems Operational</p>
                <div class="server-stats-bar">
                    <div class="stat-item">
                <i class="fas fa-clock"></i>
                <span id="uptimeDisplay">Uptime: 99%</span>
                    </div>

                    <div class="stat-item">
    <i class="fas fa-bolt"></i>
    <span id="latencyDisplay">Latency: Loading...</span>
</div>

<script>
    async function getLatency() {
        try {
            const startTime = performance.now();
            // Mengirim permintaan GET ke server (contoh: Google sebagai tes)
            await fetch('https://servers-frontend.fivem.net/api/servers/single/rj9l5g');
            const endTime = performance.now();

            // Menghitung latency dalam milidetik
            const latency = Math.round(endTime - startTime);

            // Menampilkan latency pada elemen dengan ID latencyDisplay
            document.getElementById('latencyDisplay').textContent = `Latency: ${latency} ms`;
        } catch (error) {
            console.error('Error fetching latency:', error);
            document.getElementById('latencyDisplay').textContent = 'Latency: Error';
        }
    }

    // Memanggil fungsi saat halaman dimuat
    getLatency();

    // Memperbarui latency setiap 5 detik
    setInterval(getLatency, 5000);
</script>

                    <div class="stat-item">
    <i class="fas fa-users"></i>
    <span id="playerLoginCount">Players: Loading...</span>
</div>

<script>
    async function getPlayerLoginCount() {
        try {
            // Mengambil data dari API FiveM
            const response = await fetch('https://servers-frontend.fivem.net/api/servers/single/rj9l5g');
            const data = await response.json();

            // Mengambil jumlah pemain online dari data API
            const playerCount = data.Data.players.length;

            // Menampilkan jumlah pemain pada elemen dengan ID playerLoginCount
            document.getElementById('playerLoginCount').textContent = `Players: ${playerCount}`;
        } catch (error) {
            console.error('Error fetching player login count:', error);
            document.getElementById('playerLoginCount').textContent = 'Players: Error';
        }
    }

    // Memanggil fungsi saat halaman dimuat
    getPlayerLoginCount();

    // Memperbarui jumlah pemain setiap 5 detik
    setInterval(getPlayerLoginCount, 5000);
</script>

                </div>
            </div>
        </div>

        <div class="content-wrapper">
            <div class="servers-container">

                <div class="servers-grid">
                    <!-- Roleplay Server -->
                    <div class="server-card" data-server-name="roleplay">
                        <div class="server-header">
                            <div class="header-main">
                                <h2>KISAH TANAH AIR ROLEPLAY</h2>
                                <div class="server-badges">
                                    <span class="server-type">
                                        <i class="fas fa-theater-masks"></i>
                                        Roleplay
                                    </span>
                                    <span class="player-count">
                                        <i class="fas fa-users"></i>
                                        <div class="info" id="playerCount">Player Online: Loading...</div>

    <script>
        async function fetchPlayerCount() {
            try {
                // Mengambil data dari API FiveM
                const response = await fetch('https://servers-frontend.fivem.net/api/servers/single/rj9l5g');
                const data = await response.json();

                // Mengambil jumlah player dari data API
                const playerCount = data.Data.players.length;

                // Menampilkan jumlah player di halaman
                document.getElementById('playerCount').textContent = 'Player Online: ' + playerCount;
            } catch (error) {
                console.error('Error fetching player count:', error);
                document.getElementById('playerCount').textContent = 'Player Online: Error';
            }
        }

        // Panggil fungsi saat halaman dimuat
        fetchPlayerCount();

        // Update jumlah player setiap 5 detik
        setInterval(fetchPlayerCount, 5000);
    </script>
                                    </span>
                                </div>
                            </div>
                            <span class="status-badge">Online</span>
                        </div>
                        <div class="server-info">
                            <div class="server-stats">
                                <div class="stat-group">
                                    <div class="stat-item">
                                        <i class="fas fa-users"></i>
                                        <span id="playerCountDisplay">Loading...</span>
                                        <script>
    async function updatePlayerCount() {
        try {
            // Mengambil data dari API FiveM
            const response = await fetch('https://servers-frontend.fivem.net/api/servers/single/rj9l5g');
            const data = await response.json();

            // Mengambil jumlah pemain online dan kapasitas maksimal server
            const playerCount = data.Data.players.length;
            const maxPlayers = data.Data.sv_maxclients;

            // Menampilkan jumlah pemain pada elemen dengan ID playerCountDisplay
            document.getElementById('playerCountDisplay').textContent = `${playerCount}/${maxPlayers}`;
        } catch (error) {
            console.error('Error fetching player count:', error);
            document.getElementById('playerCountDisplay').textContent = 'Error';
        }
    }

    // Panggil fungsi saat halaman dimuat
    updatePlayerCount();

    // Update jumlah pemain setiap 5 detik
    setInterval(updatePlayerCount, 5000);
</script>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-code-branch"></i>
                                        <span>v1.19.2</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-signal"></i>
                                        <span>20 TPS</span>
                                    </div>
                                </div>
                            </div>
                            <div class="server-specs">
                                <div class="spec-item">
                                    <i class="fas fa-microchip"></i>
                                    <span>Ryzen 9 5950X</span>
                                </div>
                                <div class="spec-item">
                                    <i class="fas fa-memory"></i>
                                    <span>64GB DDR4</span>
                                </div>
                            </div>
                            <div class="server-features">
                                <span>Custom Economy</span>
                                <span>City System</span>
                                <span>Professions</span>
                            </div>
                        </div>
                        <div class="server-actions">
                            <button class="play-btn">
                                <div class="button-content">
                                    <i class="fas fa-play"></i>
                                    <span>PLAY NOW</span>
                                </div>
                            </button>
                            <button class="copy-ip" data-ip="play.brezel.com">
                                <div class="button-content">
                                    <i class="fas fa-copy"></i>
                                    <span>COPY IP</span>
                                </div>
                            </button>
                        </div>
                    </div>

       <!-- Input Pencarian dan Sortir -->
<div class="fivem-search-sort-container">
    <input type="text" id="searchInput" placeholder="Search player..." onkeyup="searchPlayer()">
    <select id="sortSelect" onchange="sortPlayers()">
        <option value="name">Urutkan Berdasarkan Nama</option>
        <option value="ping">Urutkan Berdasarkan Ping</option>
    </select>
</div>

<!-- Tabel Daftar Pemain -->
<table class="fivem-player-table">
    <thead>
        <tr>
            <th>No</th>
            <th>Nama Player</th>
            <th>Ping</th>
        </tr>
    </thead>
    <tbody id="playerTable">
        <tr>
            <td colspan="3">Loading players...</td>
        </tr>
    </tbody>
</table>

<!-- JavaScript untuk Fetch Data Player -->
<script>
    let players = [];

    async function fetchPlayerNames() {
        try {
            const response = await fetch('https://servers-frontend.fivem.net/api/servers/single/rj9l5g');
            const data = await response.json();

            if (data && data.Data && data.Data.players) {
                players = data.Data.players;
                updatePlayerTable(players);
            } else {
                document.getElementById('playerTable').innerHTML = '<tr><td colspan="3">Player data not available</td></tr>';
            }
        } catch (error) {
            console.error('Error fetching player names:', error);
            document.getElementById('playerTable').innerHTML = '<tr><td colspan="3">Error loading player list</td></tr>';
        }
    }

    function updatePlayerTable(playerList) {
        const playerTable = document.getElementById('playerTable');
        playerTable.innerHTML = '';
        playerList.forEach((player, index) => {
            const row = document.createElement('tr');
            row.classList.add('fivem-player-row');
            row.innerHTML = `
                <td>${index + 1}</td>
                <td class="fivem-player-name">${player.name}</td>
                <td>${player.ping} ms</td>
            `;
            playerTable.appendChild(row);
        });
    }

    function searchPlayer() {
        const input = document.getElementById('searchInput').value.toLowerCase();
        const filteredPlayers = players.filter(player => player.name.toLowerCase().includes(input));
        updatePlayerTable(filteredPlayers);
    }

    function sortPlayers() {
        const sortBy = document.getElementById('sortSelect').value;
        players.sort((a, b) => sortBy === 'name' ? a.name.localeCompare(b.name) : a.ping - b.ping);
        updatePlayerTable(players);
    }

    fetchPlayerNames();
    setInterval(fetchPlayerNames, 30000);
</script>
  

    <footer>
        <div class="footer-content">
            <div class="footer-left">
                <img src="https://r2.fivemanage.com/MYfZf6samhDbhH0VObPlC/image/logokita.webp" alt="KITA RP" class="footer-logo">
                <p>© 2025 KISAH TANAH AIR ROLEPLAY</p>
            </div>
            <div class="footer-social">
                <a href="#" class="discord"><i class="fab fa-discord"></i></a>
                <a href="#" class="twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" class="youtube"><i class="fab fa-youtube"></i></a>
                <a href="#" class="tiktok"><i class="fab fa-tiktok"></i></a>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('serverSearch');
            const serverCards = document.querySelectorAll('.server-card');
            let searchTimeout;

            function updateSearch() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                serverCards.forEach(card => {
                    const serverName = card.querySelector('h2').textContent.toLowerCase();
                    const features = Array.from(card.querySelectorAll('.server-features span'))
                        .map(span => span.textContent.toLowerCase());
                    const specs = Array.from(card.querySelectorAll('.spec-item span'))
                        .map(span => span.textContent.toLowerCase());
                    
                    const matchesSearch = serverName.includes(searchTerm) || 
                        features.some(feature => feature.includes(searchTerm)) ||
                        specs.some(spec => spec.includes(searchTerm));

                    if (matchesSearch) {
                        card.style.display = 'flex';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    } else {
                        card.style.display = 'none';
                        card.style.opacity = '0';
                        card.style.transform = 'translateY(20px)';
                    }
                });

                // Grid düzenini güncelle
                const visibleCards = document.querySelectorAll('.server-card[style*="display: flex"]');
                const grid = document.querySelector('.servers-grid');
                
                if (visibleCards.length === 0) {
                    // Sonuç bulunamadığında gösterilecek mesaj
                    if (!document.querySelector('.no-results')) {
                        const noResults = document.createElement('div');
                        noResults.className = 'no-results';
                        noResults.innerHTML = `
                            <div class="no-results-content">
                                <i class="fas fa-search"></i>
                                <div>
                                    <p>No results found</p>
                                    <p class="suggestion">Try different keywords or clear filters.</p>
                                </div>
                            </div>
                        `;
                        grid.appendChild(noResults);
                    }
                }
            }

            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(updateSearch, 300);
            });

            // IP Kopyalama Fonksiyonu
            document.querySelectorAll('.copy-ip').forEach(button => {
                button.addEventListener('click', function() {
                    const ip = this.getAttribute('data-ip');
                    const textArea = document.createElement('textarea');
                    textArea.value = ip;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('Server IP copied: ' + ip);
                });
            });
        });
    </script>
</body>
</html>